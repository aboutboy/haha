(function(){"use strict";var e;e=angular.module("pandorabox.pages"),e.register.controller("WirelessBasicFullController",["$scope","$UCI","WirelessEncryption",function(e,s,t){var l;null==e.wireless&&(e.wireless={}),e.list={},s.$sync(["wireless"]).then(function(){var t,i,r,n,o,a,c,u,h;for(i=[],a=Object.keys(s.wireless).sort(),r=0,c=a.length;r<c;r++)if(o=a[r],!/^cfg/.test(o))for(e.wireless[o]=angular.copy(s.wireless[o]),i.push("GET iwinfo "+o+" freqlist"),i.push("GET iwinfo "+o+" htmodelist"),n=0,u=a.length;n<u;n++)h=a[n],/^cfg/.test(h)&&s.wireless[h].device===o&&(e.wireless[h]=angular.copy(s.wireless[h]),null==(t=e.wireless[h]).disabled&&(t.disabled="0"));l(i)}),l=function(t){s.$command(t,"now").then(function(s){var t,l,i,r,n,o,a,c,u,h,w,d,f;if("ok"===s.status&&angular.isArray(s.commands))for(h=s.commands,i=0,a=h.length;i<a;i++)if(u=h[i],/(freq|htmode)list/.test(u.command))for(l=u.command.match(/(\w+) (freq|htmode)list$/)[1],null==(t=e.list)[l]&&(t[l]={freqlist:[],htmodelist:[]}),w=u.content,n=0,c=w.length;n<c;n++)r=w[n],/unknown/.test(r)||(d=r.match(/^[*\s]+(\w.+ (\d+).+$)/),d?e.list[l].freqlist.push({key:d[1],val:d[2]}):(d=r.match(/(\w+)/g),d&&(e.list[l].htmodelist=function(){var e;e=[];for(o in d)f=d[o],/\d/.test(o)&&e.push(f);return e}())))})},e.encryption=t,e.submit=function(t){var l,i,r,n,o,a,c,u;l={},a=e.wireless[t];for(n in a)u=a[n],s.wireless[t][n]!==u&&(l[n]=u);s.$revert("wireless",t),s.$set("wireless",t,l),l={},i=s.wireless[t].device,c=e.wireless[i];for(n in c)u=c[n],s.wireless[i][n]!==u&&(l[n]=u);return null!=l.channel&&(o=e.list[i].htmodelist,"165"===l.channel?l.htmode="HT20":null==l.htmode&&(r=s.$Native.wireless[i].htmode,"HT20"===r?l.htmode=o[o.length-1]:l.htmode=r)),s.$revert("wireless",i),s.$set("wireless",i,l),!0}}]),e.register.value("WirelessEncryption",["none","psk","psk2"])}).call(this);